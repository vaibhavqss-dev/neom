"use strict";(self.webpackChunkneomcity_vaibhav=self.webpackChunkneomcity_vaibhav||[]).push([[10],{3010:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var a=s(9379),n=s(5043),c=s(6727),l=s(3449),o=s(579);const r=()=>{const e=(0,c.Zp)(),[t]=(0,c.ok)(),s=t.get("eventId")||"123",r=t.get("eventName")||"Round of Golf",i=t.get("eventDay")||"Jan 01, 2023",d=t.get("eventTime")||"12:00 AM",[u,v]=n.useState({eventId:s,name:r,timeSlot:d,seats:"1",eventDay:i}),[h,m]=n.useState({selectedDay:"",selectedTimeSlot:"",selectedSeats:"1 seat"}),[p,g]=n.useState(),f=e=>{try{const[t,s]=e.split(":"),a=parseInt(t),n=a>=12?"PM":"AM";return"".concat(a%12||12,":").concat(s," ").concat(n)}catch(t){return console.error("Error formatting time:",t),e}},y=(e,t)=>t?"".concat(f(e)," - ").concat(f(t)):f(e),j=()=>{if(!p||!p.time)return[];if(p.time.length>1){const e=[];for(let t=0;t<p.time.length-1;t++)e.push(y(p.time[t],p.time[t+1]));return e.length?e:[y(p.time[0])]}return p.time.map((e=>y(e)))};return(0,n.useEffect)((()=>{!async function(){try{const e=await(0,l.MV)("/events?event_id=".concat(s));console.log("Event data:",e),e.success?g(e.event):console.error("API response was not successful",e)}catch(e){console.error("Error fetching event:",e)}}()}),[]),(0,o.jsx)("div",{className:"reschedule-popup-overlay",children:(0,o.jsx)("div",{className:"event-container",children:(0,o.jsxs)("div",{className:"event-card",children:[(0,o.jsx)("h2",{children:"Hey Vaibhav,"}),(0,o.jsxs)("p",{children:['You have chosen a new "',u.name,'".',"Have a great day ahead and enjoy your new experience!"]}),(0,o.jsxs)("div",{className:"form-group_1",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Select a day"}),(0,o.jsxs)("select",{value:h.selectedDay,onChange:e=>{m((0,a.A)((0,a.A)({},h),{},{selectedDay:e.target.value}))},children:[p&&p.date&&p.date.map((e=>(0,o.jsx)("option",{children:e},e))),(!p||!p.date||0===p.date.length)&&(0,o.jsx)("option",{children:"No dates available"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Select a time slot"}),(0,o.jsxs)("select",{value:h.selectedTimeSlot,onChange:e=>{m((0,a.A)((0,a.A)({},h),{},{selectedTimeSlot:e.target.value}))},children:[j().map(((e,t)=>(0,o.jsx)("option",{children:e},t))),0===j().length&&(0,o.jsx)("option",{children:"No time slots available"})]})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Select your seats"}),(0,o.jsx)("select",{value:h.selectedSeats,onChange:e=>{m((0,a.A)((0,a.A)({},h),{},{selectedSeats:e.target.value}))},children:(()=>{if(!p||!p.available_seats)return["1 seat"];const e=[],t=Math.min(5,p.available_seats);for(let s=1;s<=t;s++)e.push("".concat(s," seat").concat(s>1?"s":""));return e})().map(((e,t)=>(0,o.jsx)("option",{children:e},t)))})]}),(0,o.jsxs)("div",{className:"button-group",children:[0!==j().length&&(0,o.jsx)("button",{className:"reserve-button",onClick:()=>{if(!u.eventId&&!h.selectedDay&&!h.selectedTimeSlot&&!h.selectedSeats)return;const e=h.selectedSeats.split(" ")[0];!function(e,t,s,n){v((c=>(0,a.A)((0,a.A)({},c),{},{eventDay:e,eventId:t,timeSlot:s,seats:n})))}(h.selectedDay,u.eventId,h.selectedTimeSlot,e),async function(){try{const e=u.seats.split(" ")[0],t=await(0,l.et)("/user/event/reschedule",{event_id:u.eventId,date:u.eventDay,time:u.timeSlot,no_of_guest:e});return t.success?(console.log("Event updated successfully"),!0):(console.error("API response was not successful",t),!1)}catch(e){return console.error("Error updating event:",e),!1}}()||alert("Event Not Updated")},children:"Reserve my seats"}),(0,o.jsx)("button",{onClick:()=>e("/upcoming-events",{replace:!0}),className:"cancel-button",children:"Cancel"})]})]})})})}}}]);
//# sourceMappingURL=10.4c2ca4df.chunk.js.map