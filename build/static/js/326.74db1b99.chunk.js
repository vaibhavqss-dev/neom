"use strict";(self.webpackChunkneomcity_vaibhav=self.webpackChunkneomcity_vaibhav||[]).push([[326],{7467:(e,t,a)=>{a.d(t,{A:()=>s});a(5043);const s=a.p+"static/media/smileGreenFace.9ce66825383463f29fa46bb11c5739ec.svg"},8326:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(5043),n=a(6727),i=a(579);const r=e=>{let{imgURL:t,name:a,category:s,date:r,time:c,face:o,index:d,event_id:m,onFavoriteRemove:l}=e;const v=(0,n.Zp)();return(0,i.jsxs)("div",{className:"favorites_img_container",children:[(0,i.jsxs)("div",{className:"favorites_img_container",children:[(0,i.jsx)("button",{onClick:()=>l&&l(parseInt(m)),className:"favorites_img_remove_btn",children:"Remove"}),(0,i.jsx)("img",{onClick:()=>v("/event-details?eventId=".concat(m)),id:"favorites_img",src:t,alt:"underwater"})]}),(0,i.jsxs)("p",{className:"favorites_img_type",children:[(0,i.jsxs)("p",{className:"favorites_img_type_text",children:[(0,i.jsx)("img",{id:"smileface",src:o,alt:"smile"}),s]}),(0,i.jsx)("p",{className:"favorites_img_type_date",children:r})]}),(0,i.jsx)("p",{className:"favorites_img_title",children:a}),(0,i.jsx)("p",{className:"favorites_img_time",children:c})]})};var c=a(7467);const o=e=>{let{imgURL:t,name:a,category:s,date:r,time:c,face:o,eventId:d}=e;const m=(0,n.Zp)();return(0,i.jsxs)("div",{onClick:()=>m("/event-details?eventId=".concat(d)),className:"recommadation_container",children:[(0,i.jsxs)("div",{className:"recommadation_img_container",children:[(0,i.jsx)("img",{id:"recommadation_img",src:t,alt:"underwater"}),(0,i.jsx)("div",{className:"recommadation_text"})]}),(0,i.jsxs)("div",{className:"recommadation_container_text_overlay",children:[(0,i.jsxs)("div",{className:"recommadation_container_text_overlay_left",children:[(0,i.jsx)("p",{className:"recommadation_img_title",children:a}),(0,i.jsx)("p",{className:"recommadation_img_type",children:r}),(0,i.jsx)("p",{className:"recommadation_img_time",children:c})]}),(0,i.jsxs)("div",{className:"recommadation_container_text_overlay_right",children:[(0,i.jsx)("img",{id:"recommadation_container_text_overlay_right_smileface",src:o,alt:"smile"}),(0,i.jsx)("p",{className:"recommadation_container_text_overlay_right_text",children:s})]})]})]})};var d=a(4219),m=a(3449);function l(){const e=(0,s.useRef)(null);const[t,a]=(0,s.useState)([]);return(0,s.useEffect)((()=>{!async function(){try{const e=await(0,m.MV)("/user/recommendation");a(e.event)}catch(e){console.error("API error:",e)}}()}),[]),(0,i.jsxs)("div",{className:"favorites_recommendation",children:[(0,i.jsxs)("p",{className:"favorites_recommendation_title",children:[localStorage.getItem("fullname"),", we've found some recommendation for you"]}),(0,i.jsx)("div",{ref:e,className:"favorites_recommendation_container",children:0!=t.length?t.map(((e,t)=>(0,i.jsx)(o,{eventId:e.event_id,imgURL:e.event.image_urls[0],name:e.event.title,category:e.event.category,date:e.event.date[0],time:e.event.time[0],face:c.A},t))):(0,i.jsx)("p",{children:"No New recommendations found, Please come after some time"})}),t.length>1&&(0,i.jsx)(d.A,{scrollLeft:()=>{e.current&&(e.current.scrollLeft-=300)},scrollRight:()=>{e.current&&(e.current.scrollLeft+=300)}})]})}var v=a(7868),_=a(5734);const x=()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[o,d]=(0,s.useState)([]),[x,g]=(0,s.useState)([]),[h,u]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[N,p]=(0,s.useState)(null),y=(0,s.useMemo)((()=>h||f),[h,f]),C=(0,s.useMemo)((()=>new Set(a.map((e=>e.eventId)))),[a]),b=(0,s.useCallback)((async()=>{u(!0);try{const e=await(0,m.MV)("/user/likeevent");d(e.events||[])}catch(e){console.error("Fetch error:",e),p("Failed to fetch liked events")}finally{u(!1)}}),[]),k=(0,s.useCallback)((async()=>{j(!0);try{const e=await(0,m.MV)("/events/trending");g(e.events||[])}catch(e){console.error("Fetch error:",e),p("Failed to fetch trending events")}finally{j(!1)}}),[]),R=(0,s.useCallback)((e=>{(0,_.lH)(e.toString()),t((t=>t.filter((t=>t.event_id!==e)))),n((t=>t.filter((t=>t.eventId!==e))))}),[]),I=(0,s.useCallback)((e=>t=>R(e)),[R]),L=(0,s.useCallback)(((e,a)=>{C.has(e)?((0,_.lH)(e.toString()),t((t=>t.filter((t=>t.event_id!==e)))),n((t=>t.filter((t=>t.eventId!==e))))):((0,_.Ee)(e.toString()).then(b),n((t=>[...t,{eventId:e,name:a}])))}),[C,b]);(0,s.useEffect)((()=>{if(!o.length)return;const e=o.map(((e,t)=>({key:t.toString(),event_id:e.event_id,onFavoriteRemove:I(e.event_id),imgURL:e.image_urls[0],name:e.title,category:e.category,date:e.date[0],time:e.time[0],face:c.A})));t(e),n(e.map((e=>({eventId:e.event_id,name:e.name}))))}),[o,I]),(0,s.useEffect)((()=>{b(),k()}),[b,k]);const S=(0,s.useMemo)((()=>y?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",color:"red"},children:"Loading..."}):N?(0,i.jsxs)("div",{children:["Error: ",N]}):(0,i.jsx)("div",{className:"favoritesPg_container",children:e.map((e=>(0,i.jsx)(r,{event_id:e.event_id,index:parseInt(e.event_id),onFavoriteRemove:e.onFavoriteRemove,imgURL:e.imgURL,name:e.name,category:e.category,date:e.date,time:e.time,face:e.face},e.event_id)))})),[e,y,N]),w=(0,s.useMemo)((()=>N||y||!x.length?(0,i.jsx)("p",{children:"No New Trending Events Available now"}):(0,i.jsx)("div",{className:"recommendationCardContainer",children:x.map(((e,t)=>(0,i.jsx)(v.A,{handleLike:L,isLiked:C.has(e.event_id),eventId:e.event_id,index:t+1,imgURL:e.event.image_urls[0],subtextDate:e.event.date[0],subtextName:e.event.subtext,name:e.event.title,timeRange:e.event.time[0],location:e.location,category:e.category,date:e.date,time:e.time},e.event_id)))})),[x,y,N,L,C]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"favoritesPg",children:[(0,i.jsxs)("p",{className:"favoritesPg_greet",children:["Good Morning ",localStorage.getItem("fullname")]}),0===e.length?(0,i.jsx)("p",{className:"favoritesPg_description",children:"You have not short listed any events yet, click on heart icon to get started"}):(0,i.jsxs)("p",{className:"favoritesPg_description",children:["You have short listed ",e.length," events to join later"]}),S,(0,i.jsx)(l,{}),(0,i.jsxs)("div",{className:"favoritesPgRecommandation_section",children:[(0,i.jsx)("p",{className:"favoritesPgRecommandation_section-title",children:"Top 5 activities on this Island today"}),(0,i.jsx)("div",{className:"favoritesPgRecommandation_section-slider",children:w})]})]})})},g=s.memo(x)},4219:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);var s=a(579);const n=e=>{let{scrollLeft:t,scrollRight:a}=e;return(0,s.jsxs)("div",{className:"button-container",children:[(0,s.jsx)("button",{onClick:a,className:"arrow-button right"}),(0,s.jsx)("button",{onClick:t,className:"arrow-button left"})]})}},7868:(e,t,a)=>{a.d(t,{A:()=>i});a(5043);var s=a(6727),n=a(579);const i=e=>{let{index:t,eventId:a,imgURL:i,subtextDate:r,subtextName:c,name:o,timeRange:d,location:m,category:l,date:v,time:_,isLiked:x,handleLike:g,IsRank:h}=e;const u=(0,s.Zp)();return(0,n.jsx)("div",{className:"recommendationCards",children:(0,n.jsxs)("div",{className:"recommendationCards_card",children:[(0,n.jsx)("div",{onClick:()=>u("/event-details?eventId=".concat(a)),className:"recommendationCards_card_img_container",children:(0,n.jsx)("img",{src:i,alt:"Upcoming Events",className:"recommendationCards_card_img"})}),(0,n.jsxs)("div",{className:"recommendationCards_card_text",children:[(0,n.jsxs)("div",{className:"recommendationCards_card_text_subtext",children:[(0,n.jsx)("p",{className:"recommendationCards_card_text_subtext_name",children:c}),(0,n.jsx)("p",{className:"recommendationCards_card_text_subtext_date",children:r.split(":")[0]})]}),(0,n.jsx)("p",{className:"recommendationCards_card_text_name",children:o}),(0,n.jsxs)("p",{className:"recommendationCards_card_text_time",children:[d.split(":")[0]," AM ","-"," ",parseInt(d.split(":")[0][0])+3," AM"]})]}),(0,n.jsx)("div",{onClick:()=>{void 0!==a&&g&&g(a,o)},className:x?"recommendationCards_card_heart isLiked":"recommendationCards_card_heart"}),h&&(0,n.jsx)("div",{className:"recommendationCards_cardRank",children:t})]},t)})}}}]);
//# sourceMappingURL=326.74db1b99.chunk.js.map