"use strict";(self.webpackChunkneomcity_vaibhav=self.webpackChunkneomcity_vaibhav||[]).push([[938],{1473:(e,t,a)=>{a.d(t,{A:()=>s});a(5043);const s=a.p+"static/media/category.7eaca8125bcf867c68828017b663b705.svg"},3016:(e,t,a)=>{a.d(t,{A:()=>s});a(5043);const s=a.p+"static/media/location.8b8d035ec55346c8518f5188e4f69a80.svg"},7467:(e,t,a)=>{a.d(t,{A:()=>s});a(5043);const s=a.p+"static/media/smileGreenFace.9ce66825383463f29fa46bb11c5739ec.svg"},9361:(e,t,a)=>{a.d(t,{A:()=>s});a(5043);const s=a.p+"static/media/star.b769ee8f5b5303d1df7515a7cd9f1745.svg"},7126:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var s=a(5043);const n=a.p+"static/media/golfcourt.3de9362c2b7c66689590.jpg";var i=a(9361),r=a(4219),o=a(1473),c=a(3016),l=a(7467),d=a(9332),m=a(579);const v=e=>{let{id:t,name:a,date:s,text:n,rating:r,profileURL:o}=e;return(0,m.jsxs)("div",{className:"reviewCard",children:[(0,m.jsxs)("div",{className:"reviewCard_user",children:[(0,m.jsx)("img",{className:"reviewCard_user_img",src:o,alt:"user"}),(0,m.jsxs)("div",{className:"reviewCard_user_text",children:[(0,m.jsx)("p",{className:"reviewCard_user_text_name",children:a}),(0,m.jsx)("p",{className:"reviewCard_user_text_date",children:s})]})]}),(0,m.jsx)("p",{className:"reviewCard_text",children:n}),(0,m.jsx)("p",{className:"reviewCard_rating",children:Array(r).fill(r).map(((e,t)=>(0,m.jsx)("img",{src:i.A,alt:"star"},t)))}),(0,m.jsx)("button",{className:"reviewCard_btn",children:"Read More"})]})},g=e=>{let{id:t,reviewsContent:a}=e;const[n,i]=(0,s.useState)([]);console.log("Liked",a);const[r,o]=(0,s.useState)([]);return(0,s.useEffect)((()=>{const e=a.map(((e,t)=>({id:e.id,key:t,name:e.User.name,date:e.createdAt||"",text:e.comment||"",rating:parseInt(e.avg_rating)||1,profileURL:e.User.profile_img||""})));o(e)}),[]),(0,m.jsx)(m.Fragment,{children:r.length>0?r.map((e=>(0,m.jsx)("div",{className:"eventDetailsPg_reviewsCard",children:(0,m.jsx)(v,{id:e.id,name:e.name,date:e.date,text:e.text,rating:e.rating,profileURL:e.profileURL})},e.id))):(0,m.jsx)("div",{className:"eventDetailsPg_reviewsCard",children:(0,m.jsx)("p",{children:"No reviews yet"})})})},_=e=>{let{images:t,isOpen:a,onClose:n}=e;const[i,r]=(0,s.useState)(0);if(!a)return null;return(0,m.jsx)("div",{className:"image-gallery-overlay",children:(0,m.jsxs)("div",{className:"image-gallery-content",children:[(0,m.jsx)("button",{className:"close-button",onClick:n,children:"\xd7"}),(0,m.jsxs)("div",{className:"image-gallery-container",children:[(0,m.jsx)("button",{className:"nav-button prev",onClick:()=>{r((e=>0===e?t.length-1:e-1))},children:"\u276e"}),(0,m.jsxs)("div",{className:"image-container",children:[(0,m.jsx)("img",{src:t[i],alt:"Gallery image ".concat(i+1)}),(0,m.jsxs)("div",{className:"image-counter",children:[i+1," / ",t.length]})]}),(0,m.jsx)("button",{className:"nav-button next",onClick:()=>{r((e=>e===t.length-1?0:e+1))},children:"\u276f"})]})]})})};var h=a(6727);const p=e=>{let{eventCompleted:t=!1,name:a="Round of Golf",time:v="10:30 AM - 7:30 PM",locationImg:p=c.A,location:u="Sindalah City, Dubai",imgURL1:x=[n,n,n,n,n],starRating:f=5,reviews:j=23,category:N="Invigorating & uplifting experience",categoryImg:y=o.A,subtextName:b="Golf",subtextDateFrom:D="Nov 22, 2025",subtextDateTo:P="Nov 22, 2025",seatsAvailable:w=120,eventDescription1:C="This is one of the many events come under golf category",eventDescription2:k="This is one of the many events come under golf category",operatorName:R="Operator River Stone",operatorDescription:S="This is one of the many events come under golf category",operatorRating:A=4.9}=e;const I=new URLSearchParams(window.location.search),E=I.get("isScheduled"),z=I.get("eventId")||2;"1"===E&&(t=!0);const L=(0,h.Zp)(),T=(0,s.useRef)(null),[G,U]=(0,s.useState)(!1),[F,O]=(0,s.useState)(null),[M,B]=(0,s.useState)(!0),[J,q]=(0,s.useState)(null),[Y,Z]=(0,s.useState)(1);(0,s.useEffect)((()=>{z?(async()=>{try{B(!0);const e=localStorage.getItem("token");e||console.warn("No authentication token found in localStorage"),console.log("Using token:",e?e.substring(0,10)+"...":"none");const t=await fetch("http://localhost:3001/api/events?event_id=".concat(z),{method:"GET",headers:{"Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""}});if(401===t.status)return console.error("Authentication failed: Unauthorized"),void q("Authentication failed. Please log in again.");const a=await t.json();a.success&&a.event?O(a.event):q("Failed to fetch event data")}catch(e){q("An error occurred while fetching event data"),console.error(e)}finally{B(!1)}})():(q("Event ID not provided"),B(!1))}),[z,L]),(0,s.useEffect)((()=>(new Promise(((e,t)=>{if(window.Razorpay)return void e(!0);const a=document.querySelector('script[src="https://checkout.razorpay.com/v1/checkout.js"]');if(a)return a.addEventListener("load",(()=>{e(!0)})),void a.addEventListener("error",(()=>{t(new Error("Failed to load Razorpay script"))}));const s=document.createElement("script");s.src="https://checkout.razorpay.com/v1/checkout.js",s.async=!0,s.id="razorpay-checkout-js",s.onload=()=>{console.log("Razorpay script loaded successfully"),e(!0)},s.onerror=()=>{console.error("Failed to load Razorpay script"),t(new Error("Failed to load Razorpay script"))},document.body.appendChild(s)})).then((()=>console.log("Razorpay ready to use"))).catch((e=>console.error("Razorpay initialization failed:",e))),()=>{const e=document.getElementById("razorpay-checkout-js");e&&"event-details"===e.getAttribute("data-added-by")&&document.body.removeChild(e)})),[]);if(M)return(0,m.jsx)("div",{className:"loading",children:"Loading event details..."});if(J)return(0,m.jsx)("div",{className:"error",children:J});if(!F)return(0,m.jsx)("div",{className:"error",children:"Event not found"});const H=e=>{const t="string"===typeof e?parseFloat(e):e,a=Math.floor(t);return Array(a).fill(0).map(((e,t)=>(0,m.jsx)("img",{src:i.A,alt:"star"},t)))},K=e=>{try{return new Date("2000-01-01T".concat(e)).toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})}catch(t){return"Time not available"}},Q=F.time.length>0?"".concat(K(F.time[0])," - ").concat(K(F.time[F.time.length-1])):"Time not specified",V=e=>{try{const t=new Date(e);return isNaN(t.getTime())?"Date not available":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return"Date not available"}},W=(F.date.length>0&&V(F.date[0]),()=>{if(!F)return[n,n,n,n,n];let e=F.image_urls||[];for(e=e.filter((e=>e&&"string"===typeof e&&""!==e.trim())),0===e.length&&(e=[n,n,n,n,n]);e.length<5;)e.push(e[0]||n);return e});return console.log("Event data",F),(0,m.jsxs)("div",{className:"eventDetailsPg",children:[(0,m.jsx)("p",{className:"eventDetailsPg_heading",children:F.title||"Event Title"}),(0,m.jsxs)("div",{className:"eventDetailsPg_details",children:[(0,m.jsx)("div",{className:"eventDetailsPg_details_stars",children:H(F.avg_rating)}),(0,m.jsx)("p",{className:"eventDetailsPg_details_stars_text",children:F.avg_rating||"0.0"}),(0,m.jsx)("div",{className:"eventDetailsPg_details_reviews",children:(0,m.jsxs)("p",{children:[F.no_reviews||"0"," Reviews"]})}),(0,m.jsx)("p",{className:"eventDetailsPg_details_location",children:F.location||"Location not specified"})]}),(0,m.jsxs)("div",{className:"eventDetailsPg_images",children:[(0,m.jsx)("div",{className:"eventDetailsPg_images_left",children:W().slice(0,4).map(((e,t)=>(0,m.jsx)("div",{className:"eventDetailsPg_images_left_img",children:(0,m.jsx)("img",{src:e,alt:"event-".concat(t)})},t)))}),(0,m.jsx)("div",{className:"eventDetailsPg_images_right",children:(0,m.jsx)("div",{className:"eventDetailsPg_images_right_img",children:(0,m.jsx)("img",{src:W()[4],alt:"event"})})}),(0,m.jsx)("button",{className:"eventDetailsPg_images_btn",onClick:()=>{U(!0)},children:"Show all"})]}),(0,m.jsx)(_,{images:W(),isOpen:G,onClose:()=>{U(!1)}}),(0,m.jsxs)("div",{className:"eventDetailsPg_description",children:[(0,m.jsxs)("div",{className:"eventDetailsPg_description_left",children:[(0,m.jsx)("p",{className:"eventDetailsPg_description_left_heading",children:"About the Event"}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_details",children:[(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_details_1",children:[(0,m.jsx)("img",{src:y,alt:"category"}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_details_1_text",children:[(0,m.jsx)("p",{children:F.category}),(0,m.jsx)("p",{children:F.subtext})]})]}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_details_2",children:[(0,m.jsx)("img",{src:p,alt:"location"}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_details_2_heading",children:[(0,m.jsx)("p",{children:"Great Location"}),(0,m.jsxs)("p",{children:["Located at: ",F.location]})]})]}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_details_3",children:[(0,m.jsx)("img",{src:l.A,alt:"smileGreenFace"}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_details_3_heading",children:[(0,m.jsxs)("p",{children:["Temperature: ",F.min_temprature,"\xb0C -"," ",F.max_temprature,"\xb0C"]}),(0,m.jsxs)("p",{children:["This event has a rating of ",F.avg_rating," with"," ",F.no_reviews," reviews"]})]})]})]}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_text",children:[(0,m.jsx)("p",{className:"eventDetailsPg_description_left_text_1",children:F.description}),(0,m.jsx)("p",{className:"eventDetailsPg_description_left_text_2",children:F.subtext})]}),(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_eventName",children:[(0,m.jsx)("p",{className:"eventDetailsPg_description_left_eventName_heading",children:"Event Organizer"}),(0,m.jsx)("p",{children:(0,m.jsx)("span",{className:"eventDetailsPg_description_left_eventName_text",children:F.operator_name})}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_left_eventName_stars",children:[H(F.avg_rating),(0,m.jsx)("span",{className:"eventDetailsPg_description_left_eventName_stars_text",children:F.avg_rating||"0.0"})]}),(0,m.jsx)("p",{className:"eventDetailsPg_description_left_eventName_text_1",children:F.description})]})]}),(0,m.jsx)("div",{className:"eventDetailsPg_description_right",children:(0,m.jsxs)("div",{className:"eventDetailsPg_description_right_form",children:[(0,m.jsx)("div",{className:"eventDetailsPg_description_right_form_time",children:Q}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_right_form_formGroup",children:[(0,m.jsxs)("div",{className:"eventDetailsPg_description_right_form_formGroup1",children:[(0,m.jsxs)("div",{className:"eventDetailsPg_description_right_form_formGroup1_1",children:[(0,m.jsx)("label",{children:"From"}),(0,m.jsx)("p",{className:"eventDetailsPg_description_right_form_formGroup1_date",children:V(F.date[0])||"Date not specified"})]}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_right_form_formGroup1_1",children:[(0,m.jsx)("label",{children:"To"}),(0,m.jsx)("p",{className:"eventDetailsPg_description_right_form_formGroup1_date",children:V(F.date[F.date.length-1])||"Date not specified"})]})]}),(0,m.jsx)("hr",{}),(0,m.jsx)("div",{className:"eventDetailsPg_description_right_form_formGroup2",children:(0,m.jsxs)("div",{className:"eventDetailsPg_description_right_form_formGroup2_2",children:[(0,m.jsx)("label",{children:"Guests"}),(0,m.jsx)("input",{type:"number",placeholder:"1",value:Y,onChange:e=>{const t=parseInt(e.target.value);!isNaN(t)&&t>0&&Z(t)},min:"1"})]})})]}),(0,m.jsxs)("div",{className:"eventDetailsPg_description_right_form_availability",children:[F.available_seats||6," Seats still available"]}),t?null:(0,m.jsx)("button",{className:"eventDetailsPg_description_right_form_btn",onClick:async()=>{if(F)try{if("undefined"===typeof window.Razorpay){console.error("Razorpay is not loaded");const e=document.createElement("script");e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,document.body.appendChild(e),await new Promise(((t,a)=>{e.onload=t,e.onerror=a}))}const e={key:"rzp_test_1DP5mmOlF5G5ag",amount:Math.max(100,100*Y),currency:"INR",name:"Neom Events",description:"Booking for ".concat(F.title," - ").concat(Y," guests"),image:"https://www.neom.com/favicon.ico",prefill:{name:localStorage.getItem("userName")||"Test User",email:localStorage.getItem("userEmail")||"test@example.com",contact:localStorage.getItem("userPhone")||"9999999999"},notes:{event_id:F.event_id,guests:Y},theme:{color:"#28a745"},handler:async function(e){console.log("Payment successful",e);try{const a=F.date&&F.date.length>0?F.date[0]:(new Date).toISOString(),s=F.date&&F.date.length>1?F.date[F.date.length-1]:a,n={event_id:F.event_id.toString(),date_from:a,date_to:s,event_name:F.title||"Event",event_category:F.category||"General",no_of_guest:Y.toString(),payment_id:e.razorpay_payment_id},i=localStorage.getItem("token");if(!i)return alert("You need to be logged in to reserve an event."),void L("/login");const r=await fetch("http://localhost:3001/api/user/reserveevent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify(n)});if(401===r.status)return alert("Your session has expired. Please log in again."),void L("/login");console.log("Reservation response status:",r.status);const o=await r.text();let c;console.log("Reservation response text:",o);try{c=JSON.parse(o)}catch(t){return console.error("Failed to parse response as JSON:",t),alert("Reservation completed but server response was invalid. Please check your bookings."),void L("/upcoming-events")}c.success?(alert("Event booked successfully!"),L("/event-details?eventId=".concat(F.event_id,"&isScheduled=1"))):(console.error("Reservation failed with error:",c.message),alert("Reservation failed: "+(c.message||"Unknown error")))}catch(J){console.error("Error reserving event:",J),alert("Reservation error: ".concat(J.message||"Unknown error occurred"))}},modal:{ondismiss:function(){console.log("Payment dismissed by user")},escape:!0,animation:!0}};console.log("Creating Razorpay instance with options:",e);const t=new window.Razorpay(e);t.on("payment.failed",(function(e){console.error("Payment failed:",e.error),alert("Payment failed: ".concat(e.error.description,"\nCode: ").concat(e.error.code))})),console.log("Opening Razorpay payment form"),t.open()}catch(J){console.error("Error initializing payment:",J),alert("Payment initialization error: ".concat(J.message||"Unknown error occurred"))}else alert("Event data not available. Please try again.")},children:"Reserve Event"})]})})]}),(0,m.jsx)("div",{ref:T,className:"eventDetailsPg_reviews",children:(0,m.jsx)(g,{id:F.event_id,reviewsContent:Array.isArray(F.reviews)?F.reviews:[]})}),F.reviews.length>0?(0,m.jsx)(r.A,{scrollLeft:()=>{T.current&&(T.current.scrollLeft-=300)},scrollRight:()=>{T.current&&(T.current.scrollLeft+=300)}}):"",(0,m.jsxs)("div",{className:"eventDetailsPg_recommendations",children:[(0,m.jsx)("p",{className:"eventDetailsPg_recommendations_heading",children:"Some more recommendations for you!"}),(0,m.jsx)("div",{className:"eventDetailsPg_recommendations_cards",children:(0,m.jsx)(d.A,{number:10})})]})]})}},4219:(e,t,a)=>{a.d(t,{A:()=>n});a(5043);var s=a(579);const n=e=>{let{scrollLeft:t,scrollRight:a}=e;return(0,s.jsxs)("div",{className:"button-container",children:[(0,s.jsx)("button",{onClick:a,className:"arrow-button right"}),(0,s.jsx)("button",{onClick:t,className:"arrow-button left"})]})}},7868:(e,t,a)=>{a.d(t,{A:()=>i});a(5043);var s=a(6727),n=a(579);const i=e=>{let{index:t,eventId:a,imgURL:i,subtextDate:r,subtextName:o,name:c,timeRange:l,location:d,category:m,date:v,time:g,isLiked:_,handleLike:h,IsRank:p}=e;const u=(0,s.Zp)();return(0,n.jsx)("div",{className:"recommendationCards",children:(0,n.jsxs)("div",{className:"recommendationCards_card",children:[(0,n.jsx)("div",{onClick:()=>u("/event-details?eventId=".concat(a)),className:"recommendationCards_card_img_container",children:(0,n.jsx)("img",{src:i,alt:"Upcoming Events",className:"recommendationCards_card_img"})}),(0,n.jsxs)("div",{className:"recommendationCards_card_text",children:[(0,n.jsxs)("div",{className:"recommendationCards_card_text_subtext",children:[(0,n.jsx)("p",{className:"recommendationCards_card_text_subtext_name",children:o}),(0,n.jsx)("p",{className:"recommendationCards_card_text_subtext_date",children:r.split(":")[0]})]}),(0,n.jsx)("p",{className:"recommendationCards_card_text_name",children:c}),(0,n.jsxs)("p",{className:"recommendationCards_card_text_time",children:[l.split(":")[0]," AM ","-"," ",parseInt(l.split(":")[0][0])+3," AM"]})]}),(0,n.jsx)("div",{onClick:()=>{void 0!==a&&h&&h(a,c)},className:_?"recommendationCards_card_heart isLiked":"recommendationCards_card_heart"}),p&&(0,n.jsx)("div",{className:"recommendationCards_cardRank",children:t})]},t)})}},9332:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(5043),n=a(7868),i=a(5734),r=a(579);const o=e=>{let{number:t,IsRank:a}=e;const[o,c]=(0,s.useState)(!1),[l,d]=(0,s.useState)(null),[m,v]=(0,s.useState)([]);function g(e,t){v((a=>a.map((e=>e.eventId)).includes(e)?((0,i.lH)(e),a.filter((t=>t.eventId!==e))):((0,i.Ee)(e),[...a,{eventId:e,name:t}])))}const[_,h]=(0,s.useState)([]);return(0,s.useEffect)((()=>{!async function(){c(!0);try{const e="http://localhost:3001",t=localStorage.getItem("token");if(!t)return void d("Authentication required");const a=await fetch("".concat(e,"/api/user/recommendation"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),s=await a.json();if(s.error)return d(s.error),void console.error("API error:",s.error);h(s.event)}catch(e){console.error("Fetch error:",e),d("Failed to fetch itineraries")}finally{c(!1)}}()}),[]),(0,r.jsxs)("div",{children:[o&&(0,r.jsx)("p",{children:"loading.."}),l&&(0,r.jsx)("p",{}),(0,r.jsxs)("p",{className:"recommandationSection_title",children:["Today's recommendation for you, ",localStorage.getItem("fullname")]}),l||o||0==_.length?(0,r.jsx)("p",{children:"No New recommendations found, Please come again after some time"}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"recommendationCardContainer",children:_.map(((e,t)=>(0,r.jsx)(n.A,{IsRank:a,handleLike:g,isLiked:m.map((e=>e.eventId)).includes(e.event_id),eventId:e.event_id,index:t+1,imgURL:e.event.image_urls[0],subtextDate:e.event.date[0],subtextName:e.event.subtext,name:e.event.title,timeRange:e.event.time[0],location:e.location,category:e.category,date:e.date,time:e.time},e.event_id)))})})]})}}}]);
//# sourceMappingURL=938.0d83d743.chunk.js.map