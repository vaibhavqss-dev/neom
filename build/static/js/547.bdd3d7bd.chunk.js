"use strict";(self.webpackChunkneomcity_vaibhav=self.webpackChunkneomcity_vaibhav||[]).push([[547],{7868:(e,t,n)=>{n.d(t,{A:()=>r});n(5043);var s=n(6727),a=n(579);const r=e=>{let{index:t,eventId:n,imgURL:r,subtextDate:c,subtextName:i,name:d,timeRange:o,location:l,category:m,date:h,time:v,isLiked:u,handleLike:g,IsRank:x}=e;const _=(0,s.Zp)();return(0,a.jsx)("div",{className:"recommendationCards",children:(0,a.jsxs)("div",{className:"recommendationCards_card",children:[(0,a.jsx)("div",{onClick:()=>_("/event-details?eventId=".concat(n)),className:"recommendationCards_card_img_container",children:(0,a.jsx)("img",{src:r,alt:"Upcoming Events",className:"recommendationCards_card_img"})}),(0,a.jsxs)("div",{className:"recommendationCards_card_text",children:[(0,a.jsxs)("div",{className:"recommendationCards_card_text_subtext",children:[(0,a.jsx)("p",{className:"recommendationCards_card_text_subtext_name",children:i}),(0,a.jsx)("p",{className:"recommendationCards_card_text_subtext_date",children:c.split(":")[0]})]}),(0,a.jsx)("p",{className:"recommendationCards_card_text_name",children:d}),(0,a.jsxs)("p",{className:"recommendationCards_card_text_time",children:[o.split(":")[0]," AM ","-"," ",parseInt(o.split(":")[0][0])+3," AM"]})]}),(0,a.jsx)("div",{onClick:()=>{void 0!==n&&g&&g(n,d)},className:u?"recommendationCards_card_heart isLiked":"recommendationCards_card_heart"}),x&&(0,a.jsx)("div",{className:"recommendationCards_cardRank",children:t})]},t)})}},9332:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(5043),a=n(7868),r=n(5734),c=n(579);const i=e=>{let{number:t,IsRank:n}=e;const[i,d]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),[m,h]=(0,s.useState)([]);function v(e,t){h((n=>n.map((e=>e.eventId)).includes(e)?((0,r.lH)(e),n.filter((t=>t.eventId!==e))):((0,r.Ee)(e),[...n,{eventId:e,name:t}])))}const[u,g]=(0,s.useState)([]);return(0,s.useEffect)((()=>{!async function(){d(!0);try{const e="http://localhost:3001",t=localStorage.getItem("token");if(!t)return void l("Authentication required");const n=await fetch("".concat(e,"/api/user/recommendation"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),s=await n.json();if(s.error)return l(s.error),void console.error("API error:",s.error);g(s.event)}catch(e){console.error("Fetch error:",e),l("Failed to fetch itineraries")}finally{d(!1)}}()}),[]),(0,c.jsxs)("div",{children:[i&&(0,c.jsx)("p",{children:"loading.."}),o&&(0,c.jsx)("p",{}),(0,c.jsxs)("p",{className:"recommandationSection_title",children:["Today's recommendation for you, ",localStorage.getItem("fullname")]}),o||i||0==u.length?(0,c.jsx)("p",{children:"No New recommendations found, Please come again after some time"}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"recommendationCardContainer",children:u.map(((e,t)=>(0,c.jsx)(a.A,{IsRank:n,handleLike:v,isLiked:m.map((e=>e.eventId)).includes(e.event_id),eventId:e.event_id,index:t+1,imgURL:e.event.image_urls[0],subtextDate:e.event.date[0],subtextName:e.event.subtext,name:e.event.title,timeRange:e.event.time[0],location:e.location,category:e.category,date:e.date,time:e.time},e.event_id)))})})]})}},6547:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var s=n(5043),a=n(9332),r=n(6727),c=n(3449),i=n(579);const d=e=>{let{}=e;const[t]=(0,r.ok)(),n=(0,r.Zp)(),d=t.get("eventId"),[o,l]=(t.get("eventName"),(0,s.useState)(null)),[m,h]=(0,s.useState)(!0),[v,u]=(0,s.useState)(null),[g,x]=(0,s.useState)(null);return(0,s.useEffect)((()=>{let e=!0;return h(!0),Promise.all([async function(){try{const t=await(0,c.MV)("/events?event_id=".concat(d));console.log("data",t),e&&(t.success?x(t.event):(console.error("API response was not successful",t),u("Failed to load event details")))}catch(t){e&&(console.error("Error fetching event:",t),u("Error connecting to server"))}}(),async function(){try{const t=await(0,c.MV)("/event/suggest_event/2");e&&(t.success?l(t.event):(console.error("API response was not successful",t),u("Failed to load suggested event")))}catch(t){e&&(console.error("Error fetching suggested event:",t),u("Error connecting to server"))}}()]).finally((()=>{e&&h(!1)})),()=>{e=!1}}),[]),m?(0,i.jsx)("div",{className:"rescheduledEventPg",children:"Loading suggested events..."}):v||!o?(0,i.jsx)("div",{className:"rescheduledEventPg",children:(0,i.jsxs)("div",{className:"rescheduledEventPg_headers",children:[(0,i.jsxs)("h1",{children:["Hey ",localStorage.getItem("fullname"),","]}),(0,i.jsxs)("p",{children:["Sorry, we couldn't find any suggested events at this time. ",v]})]})}):g?(0,i.jsx)("div",{className:"rescheduledEventPg",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"rescheduledEventPg_headers",children:[(0,i.jsxs)("h1",{children:["Hey ",localStorage.getItem("fullname"),","]}),(0,i.jsxs)("p",{children:["We have a few similar event for you against your today's rescheduled event of ",g.title,". And one of them is just starting in an"," ",o.time[0].split(":")[0]," hours"," ",o.time[0].split(":")[1]," minutes drive away."]})]}),(0,i.jsxs)("div",{className:"rescheduledEventPg_imgContainer",children:[(0,i.jsx)("img",{src:g.image_urls[0],alt:"event"}),(0,i.jsxs)("div",{className:"rescheduledEventPg_imgContainer_overlay",children:[(0,i.jsxs)("div",{className:"rescheduledEventPg_imgContainer_overlay_text",children:[(0,i.jsx)("h1",{children:g.title}),(0,i.jsx)("p",{children:g.location}),(0,i.jsxs)("p",{className:"rescheduledEventPg_imgContainer_overlay_text_timeSlots",children:[(0,i.jsx)("p",{children:g.date.map((e=>" | "+e))}),g.time.map(((e,t)=>(0,i.jsx)("div",{children:(0,i.jsx)("span",{children:e})},t)))]})]}),(0,i.jsx)("button",{className:"rescheduledEventPg_imgContainer_overlay_btn",onClick:()=>{n("/reschedule-popup?eventId=".concat(g.event_id,"&eventName=").concat(encodeURIComponent(g.title),"&eventDay=").concat(o.date[0],"&eventTime=").concat(g.time[0]))},children:"Reschedule"})]})]}),(0,i.jsx)("div",{className:"rescheduledEventPg_recommendation",children:(0,i.jsx)(a.A,{number:10})})]})}):(0,i.jsx)("div",{className:"rescheduledEventPg",children:(0,i.jsxs)("div",{className:"rescheduledEventPg_headers",children:[(0,i.jsxs)("h1",{children:["Hey ",localStorage.getItem("fullname"),","]}),(0,i.jsx)("p",{children:"Sorry, we couldn't load the event details at this time."})]})})}}}]);
//# sourceMappingURL=547.bdd3d7bd.chunk.js.map