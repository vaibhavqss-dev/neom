"use strict";(self.webpackChunkneomcity_vaibhav=self.webpackChunkneomcity_vaibhav||[]).push([[145],{9145:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var s=t(9379),i=t(5043);const n=t.p+"static/media/star-review-white.b8eb73dafd8a9735055c072b85742f15.svg";const r=t.p+"static/media/review-star.daa0330fa0faf9acb38d467583505d44.svg";var l=t(579);const d=e=>{let{name:a,rate:t,handleStarChange:s}=e;return(0,l.jsx)("div",{className:"reviewStar",children:Array(5).fill(5).map(((e,i)=>(0,l.jsx)("img",{onClick:()=>s(a,i+1),src:i+1<=t?r:n,alt:"star",className:"reviewStar_star"},i)))})};var c=t(6727),v=t(3449);const o=()=>{const e=(0,c.Zp)(),[a,t]=i.useState({qualityOfEvent:0,serviceAtEvent:0,facilitiesOfEvent:0,staffPoliteness:0,operatorOfEvent:0}),[n,r]=i.useState(""),[o,f]=(0,i.useState)(!1),[_,h]=(0,i.useState)(null);function g(e,a){t((t=>(0,s.A)((0,s.A)({},t),{},{[e]:a})))}(0,i.useEffect)((()=>{localStorage.getItem("token")||(console.warn("No authentication token found. Redirecting to login."),e("/login"))}),[e]);const u=new URLSearchParams(window.location.search).get("eventId");return console.log("EventId from query parameters:",u),(0,l.jsx)("div",{className:"addReview",children:(0,l.jsxs)("div",{className:"addReviewPg",children:[(0,l.jsx)("div",{className:"addReviewPg_clsBtn",children:(0,l.jsx)(c.k2,{to:"/myfeedback",children:(0,l.jsx)("button",{children:"X"})})}),(0,l.jsx)("h1",{className:"addReviewPg_heading",children:"Add a review"}),(0,l.jsxs)("p",{className:"addReviewPg_description",children:["Hi ",localStorage.getItem("fullname"),", If you're here on this page, we bet you enjoy this event fully. Would you mind to share your valuable feedback review with us?"]}),(0,l.jsxs)("div",{className:"addReviewPg_star",children:[(0,l.jsxs)("div",{className:"addReviewPg_star_left",children:[(0,l.jsxs)("div",{className:"addReviewPg_star_left_qualityOfEvent",children:[(0,l.jsx)("p",{className:"addReviewPg_star_left_quality_heading",children:"Quality of Event"}),(0,l.jsx)("div",{className:"addReviewPg_star_left_quality_star",children:(0,l.jsx)(d,{name:"qualityOfEvent",rate:a.qualityOfEvent,handleStarChange:g})})]}),(0,l.jsxs)("div",{className:"addReviewPg_star_left_facilitiesOfEvent",children:[(0,l.jsx)("p",{className:"addReviewPg_star_left_quality_heading",children:"Facilities of Event"}),(0,l.jsx)("div",{className:"addReviewPg_star_left_quality_star",children:(0,l.jsx)(d,{name:"facilitiesOfEvent",rate:a.facilitiesOfEvent,handleStarChange:g})})]}),(0,l.jsxs)("div",{className:"addReviewPg_star_left_staffPoliteness",children:[(0,l.jsx)("p",{className:"addReviewPg_star_left_quality_heading",children:"Staff Politeness"}),(0,l.jsx)("div",{className:"addReviewPg_star_left_quality_star",children:(0,l.jsx)(d,{name:"staffPoliteness",rate:a.staffPoliteness,handleStarChange:g})})]})]}),(0,l.jsxs)("div",{className:"addReviewPg_star_right",children:[(0,l.jsxs)("div",{className:"addReviewPg_star_right_serviceAtEvent",children:[(0,l.jsx)("p",{className:"addReviewPg_left_serviceAtEvent_heading",children:"Services at Event"}),(0,l.jsx)("div",{className:"addReviewPg_left_serviceAtEvent_star",children:(0,l.jsx)(d,{name:"serviceAtEvent",rate:a.serviceAtEvent,handleStarChange:g})})]}),(0,l.jsxs)("div",{className:"addReviewPg_star_right_operatorOfEvent",children:[(0,l.jsx)("p",{className:"addReviewPg_left_serviceAtEvent_heading",children:"Operator of Event"}),(0,l.jsx)("div",{className:"addReviewPg_left_serviceAtEvent_star",children:(0,l.jsx)(d,{name:"operatorOfEvent",rate:a.operatorOfEvent,handleStarChange:g})})]})]})]}),(0,l.jsx)("div",{className:"addReviewPg_feedback",children:(0,l.jsx)("textarea",{required:!0,onChange:e=>function(e){r(e.target.value)}(e),className:"addReviewPg_feedback_textArea",placeholder:"Share your feeback and suggestions about this event"})}),_&&(0,l.jsx)("div",{className:"addReviewPg_error",children:_}),(0,l.jsx)("button",{onClick:function(){o||async function(){if(0!==a.qualityOfEvent&&0!==a.serviceAtEvent&&0!==a.facilitiesOfEvent&&0!==a.staffPoliteness&&0!==a.operatorOfEvent&&""!==n.trim())try{f(!0),h(null);const t=localStorage.getItem("token");if(!t)return h("Please log in to submit a review"),void e("/login");console.log("Submitting review with token:",t.substring(0,10)+"...");const s=await(0,v.Et)("/user/review",{quality_of_event:a.qualityOfEvent,service_of_event:a.serviceAtEvent,facilites_of_event:a.facilitiesOfEvent,staffPoliteness:a.staffPoliteness,operator_of_event:a.operatorOfEvent,comment:n,event_id:u});s.success?(alert("Review added successfully"),e("/vib-o-meter?eventId=".concat(u))):h(s.message||"Failed to add review")}catch(t){console.error("Error submitting review:",t),h("An error occurred while submitting your review")}finally{f(!1)}else h("Please fill all the fields")}()},className:"addReviewPg_submitBtn",disabled:o,children:o?"Submitting...":"Submit"})]})})}}}]);
//# sourceMappingURL=145.9d0b38ee.chunk.js.map