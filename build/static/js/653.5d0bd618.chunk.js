"use strict";(self.webpackChunkneomcity_vaibhav=self.webpackChunkneomcity_vaibhav||[]).push([[653],{3111:(e,t,n)=>{n.d(t,{A:()=>a});n(5043);const a=n.p+"static/media/calendar.bb030a5b60b754ba6af716707c991804.svg"},3016:(e,t,n)=>{n.d(t,{A:()=>a});n(5043);const a=n.p+"static/media/location.8b8d035ec55346c8518f5188e4f69a80.svg"},6653:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(9379),i=n(5043),s=n(7868),c=n(2482),o=n(3016),l=n(3111);function d(e){if(!e||!Array.isArray(e)||0===e.length)return"";try{return 1===e.length?r(e[0]):"".concat(r(e[0])," - ").concat(r(e[e.length-1]))}catch(t){return console.error("Error formatting display date:",t,e),""}}function r(e){try{const t=new Date(e);if(isNaN(t.getTime()))return e;const n=t.toLocaleString("default",{month:"short"}),a=t.getDate();return"".concat(n," ").concat(a)}catch(t){return console.error("Error formatting single date:",t,e),e}}function v(e){if(!e||!Array.isArray(e)||0===e.length)return"";try{const t=e=>{try{const t=e.split(":");if(t.length<2)return e;const n=parseInt(t[0]),a=t[1];if(isNaN(n))return e;const i=n>=12?"PM":"AM";return"".concat(n%12||12,":").concat(a," ").concat(i)}catch(t){return e}};return 1===e.length?t(e[0]):"".concat(t(e[0])," - ").concat(t(e[e.length-1]))}catch(t){return console.error("Error formatting time:",t,e),""}}var u=n(5734),m=n(3449),g=n(579);const p=["Neom City, Saudi Arabia","The Line","Trojena","Sindalah Island","OXAGON","Neom Bay","Gulf of Aqaba","NEOM Mountain Resort","NEOM Tech City","The Spine","Port NEOM"],h=["sports","technology","entertainment","business","adventure","culture","health","food"],_=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)([]),[_,x]=(0,i.useState)({date:"",location:"",distance:{type:"",value:0},category:"",isDistanceApplied:!1,isCategoryApplied:!1}),[b,y]=(0,i.useState)([]),[N,j]=(0,i.useState)(!0),[f,C]=(0,i.useState)(!1),[k,A]=(0,i.useState)(p),E=(0,i.useCallback)(((e,t)=>{y((n=>n.map((e=>e.id)).includes(e)?((0,u.lH)(e),n.filter((t=>t.id!==e))):((0,u.Ee)(e),[...n,{id:e,name:t}])))}),[]),w=(0,i.useCallback)(((e,t)=>{if("distance"===t&&"object"===typeof e)x((t=>(0,a.A)((0,a.A)({},t),{},{distance:e,isDistanceApplied:!0})));else if("category"===t){const t=e;x((e=>{const n=(0,a.A)((0,a.A)({},e),{},{category:t,isCategoryApplied:!0});return P(t,n.location,n.date),n}))}else{const n=e.target.value;x((e=>{const i=(0,a.A)((0,a.A)({},e),{},{[t]:n});return"date"===t&&P(i.category,i.location,n),i}))}}),[]),D=(0,i.useCallback)((e=>{const t=e.target.value;x((e=>(0,a.A)((0,a.A)({},e),{},{location:t}))),A(p.filter((e=>e.toLowerCase().includes(t.toLowerCase()))))}),[]),L=(0,i.useCallback)((e=>{x((t=>{const n=(0,a.A)((0,a.A)({},t),{},{location:e});return P(n.category,e,n.date),n})),C(!1)}),[]),P=(0,i.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";j(!0);try{const a=new URLSearchParams;if(e&&a.append("category",e.toLowerCase()),t&&a.append("location",t),n){const e=function(e){if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?(console.error("Invalid date:",e),""):t.toDateString()}catch(t){return console.error("Error formatting date:",t),""}}(n);a.append("date",e)}const i="/events?".concat(a.toString()),s=await(0,m.MV)(i);s.success&&Array.isArray(s.data)?r(s.data):(console.error("Invalid response format or empty data",s),r([]))}catch(a){console.error("Error fetching events:",a),r([])}finally{j(!1)}}),[]);(0,i.useEffect)((()=>{P()}),[P]),(0,i.useEffect)((()=>{if(n&&n.length>0)try{const e=n.map((e=>(0,g.jsx)(s.A,{isLiked:b.map((e=>e.id)).includes(String(e.event_id)),eventId:String(e.event_id),handleLike:E,index:e.event_id,imgURL:e.image_urls&&e.image_urls.length>0?e.image_urls[0]:"",subtextDate:d(e.date),subtextName:e.subtext||"",name:e.title||"",timeRange:v(e.time),location:e.location||"",category:e.category||"",date:d(e.date),time:v(e.time)},e.event_id)));t(e)}catch(e){console.error("Error generating cards:",e),t([])}else t([])}),[n,b,E]);const S=(0,i.useMemo)((()=>h.map((e=>(0,g.jsx)("button",{onClick:()=>w(e,"category"),className:_.category===e?"upcomingEventsPg_eventsType_btn_active":"upcomingEventsPg_eventsType_btn",children:e.charAt(0).toUpperCase()+e.slice(1)},e)))),[_.category,w]);return(0,g.jsxs)("div",{className:"upcomingEventsPg",children:[(0,g.jsxs)("h1",{className:"upcomingEventsPg_heading",children:["Hey ",localStorage.getItem("fullname"),","]}),(0,g.jsx)("p",{className:"upcomingEventsPg_subtext",children:"Let's find something exciting for you."}),(0,g.jsxs)("div",{className:"upcomingEventsPg_date_and_distance",children:[(0,g.jsxs)("div",{className:"upcomingEventsPg_date",children:[(0,g.jsx)("p",{className:"upcomingEventsPg_date_text",children:"What suits your schedules?"}),(0,g.jsxs)("div",{className:"upcomingEventsPg_dateLocation_btns",children:[(0,g.jsxs)("div",{className:"upcomingEventsPg_dateLocation_btns_date",children:[(0,g.jsx)("img",{src:l.A,alt:"calendersvg"}),(0,g.jsx)("input",{type:"date",onChange:e=>w(e,"date"),className:"upcomingEventsPg_dateLocation_btns_dateBtn",placeholder:"Pick a date"})]}),(0,g.jsxs)("div",{className:"upcomingEventsPg_dateLocation_btns_location",children:[(0,g.jsx)("img",{src:o.A,alt:"location"}),(0,g.jsxs)("div",{style:{position:"relative",width:"100%"},children:[(0,g.jsx)("input",{type:"text",value:_.location,onChange:D,className:"upcomingEventsPg_dateLocation_btns_text",placeholder:"Pick a location",onFocus:()=>C(!0),onBlur:()=>setTimeout((()=>C(!1)),200)}),f&&(0,g.jsx)("div",{style:{position:"absolute",top:"100%",left:0,width:"100%",maxHeight:"200px",overflowY:"auto",background:"white",boxShadow:"0px 4px 10px rgba(0,0,0,0.1)",borderRadius:"4px",zIndex:10},children:k.map(((e,t)=>(0,g.jsx)("div",{style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseDown:()=>L(e),onTouchStart:()=>L(e),children:e},t)))})]})]})]})]}),(0,g.jsx)(c.A,{Filter:_,setDistance:w})]}),(0,g.jsxs)("div",{className:"upcomingEventsPg_eventsType",children:[(0,g.jsx)("p",{className:"upcomingEventsPg_eventsType_text",children:"You can always filter out the events by category wise."}),(0,g.jsx)("div",{className:"upcomingEventsPg_eventsType_btns",children:S})]}),(0,g.jsx)("div",{className:"upcomingEventsPg_recommendation",children:N?(0,g.jsx)("div",{children:"Loading events..."}):0===e.length||_.distance.value>=20?(0,g.jsx)("div",{className:"ColorRed",children:"No New events found. Try using different filters."}):e})]})}},7868:(e,t,n)=>{n.d(t,{A:()=>s});n(5043);var a=n(6727),i=n(579);const s=e=>{let{index:t,eventId:n,imgURL:s,subtextDate:c,subtextName:o,name:l,timeRange:d,location:r,category:v,date:u,time:m,isLiked:g,handleLike:p,IsRank:h}=e;const _=(0,a.Zp)();return(0,i.jsx)("div",{className:"recommendationCards",children:(0,i.jsxs)("div",{className:"recommendationCards_card",children:[(0,i.jsx)("div",{onClick:()=>_("/event-details?eventId=".concat(n)),className:"recommendationCards_card_img_container",children:(0,i.jsx)("img",{src:s,alt:"Upcoming Events",className:"recommendationCards_card_img"})}),(0,i.jsxs)("div",{className:"recommendationCards_card_text",children:[(0,i.jsxs)("div",{className:"recommendationCards_card_text_subtext",children:[(0,i.jsx)("p",{className:"recommendationCards_card_text_subtext_name",children:o}),(0,i.jsx)("p",{className:"recommendationCards_card_text_subtext_date",children:c.split(":")[0]})]}),(0,i.jsx)("p",{className:"recommendationCards_card_text_name",children:l}),(0,i.jsxs)("p",{className:"recommendationCards_card_text_time",children:[d.split(":")[0]," AM ","-"," ",parseInt(d.split(":")[0][0])+3," AM"]})]}),(0,i.jsx)("div",{onClick:()=>{void 0!==n&&p&&p(n,l)},className:g?"recommendationCards_card_heart isLiked":"recommendationCards_card_heart"}),h&&(0,i.jsx)("div",{className:"recommendationCards_cardRank",children:t})]},t)})}},2482:(e,t,n)=>{n.d(t,{A:()=>i});n(5043);var a=n(579);const i=e=>{var t,n,i,s,c,o,l,d,r,v,u,m,g;let{Filter:p,setDistance:h}=e;return(0,a.jsxs)("div",{className:"selectDistance",children:[(0,a.jsx)("p",{className:"selectDistance_text",children:"How far are you willing to go?"}),(0,a.jsxs)("div",{className:"selectDistance_btns",children:[(0,a.jsxs)("div",{className:"selectDistance_btns_walking",children:[(0,a.jsx)("button",{onClick:()=>null===h||void 0===h?void 0:h({type:"walking",value:10},"distance"),value:"10",className:"walking"===(null===p||void 0===p||null===(t=p.distance)||void 0===t?void 0:t.type)&&10===(null===p||void 0===p||null===(n=p.distance)||void 0===n?void 0:n.value)?"selectDistance_btns_btn_active":"",children:"10 mins Walking"}),(0,a.jsx)("button",{onClick:()=>null===h||void 0===h?void 0:h({type:"walking",value:20},"distance"),value:"20",id:"bothSidebarinDistance",className:"walking"===(null===p||void 0===p||null===(i=p.distance)||void 0===i?void 0:i.type)&&20===(null===p||void 0===p||null===(s=p.distance)||void 0===s?void 0:s.value)?"selectDistance_btns_btn_active":"",children:"20 mins Walking"}),(0,a.jsx)("button",{onClick:()=>null===h||void 0===h?void 0:h({type:"walking",value:30},"distance"),value:"30",className:"walking"===(null===p||void 0===p||null===(c=p.distance)||void 0===c?void 0:c.type)&&30===(null===p||void 0===p||null===(o=p.distance)||void 0===o?void 0:o.value)?"selectDistance_btns_btn_active":"",children:"30 mins Walking"})]}),(0,a.jsxs)("div",{className:"selectDistance_btns_driving",children:[(0,a.jsx)("button",{onClick:()=>null===h||void 0===h?void 0:h({type:"driving",value:10},"distance"),value:"10",className:"driving"===(null===p||void 0===p||null===(l=p.distance)||void 0===l?void 0:l.type)&&10===(null===p||void 0===p||null===(d=p.distance)||void 0===d?void 0:d.value)?"selectDistance_btns_btn_active":"",children:"10 mins drive"}),(0,a.jsx)("button",{id:"bothSidebarinDistance",onClick:()=>null===h||void 0===h?void 0:h({type:"driving",value:20},"distance"),value:"20",className:"driving"===(null===p||void 0===p||null===(r=p.distance)||void 0===r?void 0:r.type)&&20===(null===p||void 0===p||null===(v=p.distance)||void 0===v?void 0:v.value)?"selectDistance_btns_btn_active":"",children:"20 mins drive"}),(0,a.jsx)("button",{onClick:()=>null===h||void 0===h?void 0:h({type:"driving",value:30},"distance"),value:"30",className:"driving"===(null===p||void 0===p||null===(u=p.distance)||void 0===u?void 0:u.type)&&30===(null===p||void 0===p||null===(m=p.distance)||void 0===m?void 0:m.value)?"selectDistance_btns_btn_active":"",children:"30 mins drive"})]}),(0,a.jsx)("div",{className:"selectDistance_btns_noLimits",children:(0,a.jsx)("button",{className:"noLimits"===(null===p||void 0===p||null===(g=p.distance)||void 0===g?void 0:g.type)?"selectDistance_btns_btn_active":"",onClick:()=>null===h||void 0===h?void 0:h({type:"noLimits",value:0},"distance"),children:"No limits"})})]})]})}}}]);
//# sourceMappingURL=653.5d0bd618.chunk.js.map